<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Builders FirstSource | Safety Stand-Down</title>

<link rel="manifest" href="manifest.json"/>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  margin:0;
  background:#f4f6f8;
  color:#1F2A44;
}

header{
  background:#C8102E;
  color:#fff;
  padding:18px;
  text-align:center;
}

header h1{
  margin:0;
  font-size:20px;
  letter-spacing:.5px;
}

.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}

.section{
  background:#fff;
  border:2px solid #C8102E;
  border-radius:10px;
  padding:18px;
  margin-bottom:20px;
  box-shadow:0 4px 10px rgba(0,0,0,0.05);
}

.section-title{
  font-size:18px;
  font-weight:700;
  margin-bottom:10px;
  color:#C8102E;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}

label{
  font-weight:600;
  font-size:14px;
}

input, select, textarea{
  width:100%;
  padding:10px;
  margin-top:5px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:14px;
}

textarea{
  resize:vertical;
}

button{
  width:100%;
  padding:14px;
  background:#C8102E;
  color:#fff;
  font-weight:700;
  border:none;
  border-radius:8px;
  margin-top:20px;
  cursor:pointer;
  font-size:16px;
}

button:hover{
  background:#a50e25;
}

.small{
  font-size:12px;
  color:#666;
  margin-top:8px;
}

img{
  border-radius:8px;
  margin-top:10px;
}
</style>
</head>

<body>

<header>
  <h1>Builders FirstSource</h1>
  <div>Safety Stand-Down</div>
</header>

<div class="container" id="pdfContent">

<!-- PROJECT INFO -->
<div class="section">
  <div class="section-title">Project Information</div>
  <div class="grid">
    <div>
      <label>Date</label>
      <input type="date">
    </div>
    <div>
      <label>BFS Representative</label>
      <input>
    </div>
    <div>
      <label>Customer</label>
      <input>
    </div>
    <div>
      <label>Project</label>
      <input id="jobsite">
    </div>
    <div>
      <label>Lot / Building</label>
      <input>
    </div>
    <div>
      <label>Workers Onsite</label>
      <input type="number">
    </div>
  </div>
</div>

<!-- SAFETY SUMMARY -->
<div class="section">
  <div class="section-title">Safety Summary</div>
  <label>PPE & Safety Procedures Followed?</label>
  <select>
    <option>Yes</option>
    <option>Partial</option>
    <option>No</option>
  </select>

  <label style="margin-top:15px;">Stand-Down Summary</label>
  <textarea rows="4"></textarea>

  <label style="margin-top:15px;">Project Issues</label>
  <textarea rows="4"></textarea>
</div>

<!-- PHOTOS -->
<div class="section">
  <div class="section-title">Photos</div>
  <input type="file" id="photoUpload" accept="image/*" multiple>
  <div class="small">Upload from gallery (multiple allowed)</div>
  <div id="photoPreview"></div>
</div>

<button id="savePdfBtn" type="button">
  Save Safety Stand Down (PDF)
</button>

</div>

<!-- PHOTO COMPRESSION -->
<script>
let compressedImages = [];

document.getElementById('photoUpload').addEventListener('change', function(event){
  const preview = document.getElementById('photoPreview');
  preview.innerHTML = '';
  compressedImages = [];

  Array.from(event.target.files).forEach(file=>{
    const reader = new FileReader();
    reader.onload = function(e){
      const img = new Image();
      img.src = e.target.result;

      img.onload = function(){
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');

        const MAX_WIDTH = 1000;
        const scale = MAX_WIDTH / img.width;

        canvas.width = MAX_WIDTH;
        canvas.height = img.height * scale;

        ctx.drawImage(img,0,0,canvas.width,canvas.height);

        const compressed = canvas.toDataURL("image/jpeg",0.6);
        compressedImages.push(compressed);

        const previewImg = document.createElement('img');
        previewImg.src = compressed;
        previewImg.style.width='100%';
        preview.appendChild(previewImg);
      };
    };
    reader.readAsDataURL(file);
  });
});
</script>

<!-- PDF GENERATION -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
document.getElementById("savePdfBtn").addEventListener("click", async ()=>{
  const { jsPDF } = window.jspdf;

  const btn = document.getElementById("savePdfBtn");
  btn.style.display="none";

  const element = document.getElementById("pdfContent");

  const canvas = await html2canvas(element,{
    scale:0.9,
    useCORS:true
  });

  btn.style.display="block";

  const imgData = canvas.toDataURL("image/jpeg",0.6);

  const pdf = new jsPDF("p","pt","a4");
  const pageWidth = pdf.internal.pageSize.getWidth();
  const imgWidth = pageWidth;
  const imgHeight = (canvas.height * imgWidth) / canvas.width;

  pdf.addImage(imgData,"JPEG",0,0,imgWidth,imgHeight,"","FAST");

  pdf.save("BFS_Safety_Stand_Down.pdf");
});
</script>

</body>
</html>
<!-- PROJECT INFO -->
<div class="section">
  <div class="section-title">Project Information</div>
  <div class="grid">
    <div>
      <label>Date</label>
      <input type="date">
    </div>
    <div>
      <label>BFS Representative</label>
      <input>
    </div>
    <div>
      <label>Customer</label>
      <input>
    </div>
    <div>
      <label>Project / Jobsite</label>
      <input id="jobsite">
    </div>
    <div>
      <label>Lot / Building</label>
      <input>
    </div>
    <div>
      <label># of Workers Onsite</label>
      <input type="number">
    </div>
  </div>
</div>

<!-- SAFETY SUMMARY -->
<div class="section">
  <div class="section-title">Safety Stand-Down Summary</div>
  <label>PPE & Safety Procedures Followed?</label>
  <select>
    <option>Yes</option>
    <option>Partial</option>
    <option>No</option>
  </select>

  <label style="margin-top:15px;">Summary of Discussion</label>
  <textarea rows="4"></textarea>

  <label style="margin-top:15px;">Project Issues / Corrections</label>
  <textarea rows="4"></textarea>
</div>

<!-- SAFETY VIOLATION BREAKDOWN -->
<div class="section">
  <div class="section-title">Safety Violation Breakdown</div>

  <ul>
    <li><strong>Hardhat – Glasses – Boots:</strong> $50–$100 per person</li>
    <li><strong>Ladder Violation:</strong> $100–$250 per person</li>
    <li><strong>Safety Rails:</strong> $100–$250 per person</li>
    <li><strong>Crane Safety Violation:</strong> $100–$500 per offense</li>
    <li><strong>Drugs or Alcohol:</strong> $500 – Termination</li>
  </ul>

  <h4>Personal Fall Protection</h4>
  <ul>
    <li>1st Offense: $500 per person</li>
    <li>2nd Offense: $1,000 + written warning</li>
    <li>3rd Offense: $1,500 + 1 month not working for BFS</li>
    <li>4th Offense: $2,000 + 1 year not working for BFS</li>
    <li>5th Offense: No longer working for BFS</li>
  </ul>

  <h4>Scaffolding</h4>
  <ul>
    <li>Site-built scaffolding is NOT allowed.</li>
    <li>Only steel site-assembled scaffolding permitted.</li>
    <li>First Offense: $200 per person</li>
  </ul>
</div>

<!-- WEATHER POLICIES -->
<div class="section">
  <div class="section-title">Weather Policies</div>

  <h4>Severe Weather</h4>
  <p>
    Framing crews are responsible for properly bracing and safely installing wall panels and trusses.
    Installation during severe weather is strongly discouraged.
    If panels or trusses fall or are damaged, this is considered an automatic rebuild.
  </p>

  <h4>Cold Weather</h4>
  <p>
    Use of propane space heaters and burn piles on site are prohibited.
  </p>
</div>

<!-- MATERIAL HANDLING -->
<div class="section">
  <div class="section-title">Material Handling</div>
  <ul>
    <li>Material may NOT be taken from one lot to another without BFS approval.</li>
    <li>Unauthorized transfer may be treated as theft.</li>
    <li>Do not install damaged material.</li>
    <li>Once installed, the framer owns the material.</li>
  </ul>
</div>

<!-- FOUNDATIONS -->
<div class="section">
  <div class="section-title">Foundations</div>
  <ul>
    <li>Notify builder/project manager immediately of issues.</li>
    <li>Document with photos.</li>
    <li>Do not continue framing until solution is approved.</li>
  </ul>
</div>

<!-- WORKING HOURS -->
<div class="section">
  <div class="section-title">Working Hours</div>
  <ul>
    <li>No framing before 7:00 AM or after 7:00 PM (Mon–Fri)</li>
    <li>No framing before 9:00 AM on Saturdays</li>
    <li><strong>No work on Sundays</strong></li>
  </ul>
</div>

<!-- SUBCONTRACTOR ACKNOWLEDGMENT -->
<div class="section">
  <div class="section-title">Subcontractor Safety Acknowledgment</div>

  <label>Subcontractor Company</label>
  <input type="text">

  <label>Subcontractor Name (Print)</label>
  <input type="text">

  <label>Signature</label>
  <input type="text">

  <label>Date</label>
  <input type="date">
</div>

<!-- PHOTOS -->
<div class="section">
  <div class="section-title">Photos</div>
  <input type="file" id="photoUpload" accept="image/*" multiple>
  <div class="small">Upload from gallery (multiple allowed)</div>
  <div id="photoPreview"></div>
</div>

