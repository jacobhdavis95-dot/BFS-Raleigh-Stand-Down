<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Builders FirstSource | Safety Stand-Down</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  margin:0;
  background:#f4f6f8;
  color:#1F2A44;
}

header{
  background:#C8102E;
  color:#fff;
  padding:18px;
  text-align:center;
}

.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}

.section{
  background:#fff;
  border:2px solid #C8102E;
  border-radius:10px;
  padding:18px;
  margin-bottom:20px;
  box-shadow:0 4px 10px rgba(0,0,0,0.05);
}

.section-title{
  font-size:18px;
  font-weight:700;
  margin-bottom:10px;
  color:#C8102E;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}

label{
  font-weight:600;
  font-size:14px;
  display:block;
  margin-top:10px;
}

input, select, textarea{
  width:100%;
  padding:10px;
  margin-top:5px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:14px;
}

button{
  width:100%;
  padding:14px;
  background:#C8102E;
  color:#fff;
  font-weight:700;
  border:none;
  border-radius:8px;
  margin-top:20px;
  cursor:pointer;
}

button:hover{
  background:#a50e25;
}

.small{
  font-size:12px;
  color:#666;
  margin-top:8px;
}

img{
  border-radius:8px;
  margin-top:10px;
}
</style>
</head>

<body>

<header>
  <h1>Builders FirstSource</h1>
  <div>Safety Stand-Down</div>
</header>

<div class="container" id="pdfContent">

<!-- PROJECT INFO -->
<div class="section">
  <div class="section-title">Project Information / Información del Proyecto</div>
  <div class="grid">
    <div>
      <label>Date / Fecha</label>
      <input type="date">
    </div>
    <div>
      <label>BFS Representative / Representante BFS</label>
      <input>
    </div>
    <div>
      <label>Customer / Cliente</label>
      <input>
    </div>
    <div>
      <label>Project / Proyecto</label>
      <input id="jobsite">
    </div>
    <div>
      <label>Lot / Lote</label>
      <input>
    </div>
    <div>
      <label># Workers / # Trabajadores</label>
      <input type="number">
    </div>
  </div>
</div>

<!-- SAFETY SUMMARY -->
<div class="section">
  <div class="section-title">Safety Summary / Resumen de Seguridad</div>

  <label>PPE & Safety Procedures Followed?</label>
  <label><em>¿Se siguieron los procedimientos de seguridad?</em></label>
  <select>
    <option>Yes / Sí</option>
    <option>Partial / Parcial</option>
    <option>No</option>
  </select>

  <label>Stand-Down Summary</label>
  <label><em>Resumen de la Reunión</em></label>
  <textarea rows="4"></textarea>

  <label>Project Issues / Corrections</label>
  <label><em>Problemas del Proyecto / Correcciones</em></label>
  <textarea rows="4"></textarea>
</div>

<!-- SAFETY VIOLATIONS -->
<div class="section">
  <div class="section-title">Safety Violations / Violaciones</div>

  <ul>
    <li><strong>Hardhat – Glasses – Boots:</strong> $50–$100<br>
    <em>Casco – Gafas – Botas: $50–$100</em></li>

    <li><strong>Ladder Violation:</strong> $100–$250<br>
    <em>Violación de Escalera: $100–$250</em></li>

    <li><strong>Drugs or Alcohol:</strong> $500 – Termination<br>
    <em>Drogas o Alcohol: $500 – Terminación</em></li>
  </ul>
</div>

<!-- WORKING HOURS -->
<div class="section">
  <div class="section-title">Working Hours / Horario Laboral</div>
  <ul>
    <li>No work before 7AM or after 7PM (Mon–Fri)</li>
    <li>No work before 9AM Saturday</li>
    <li><strong>No work Sunday</strong></li>
  </ul>
  <ul>
    <li><em>No trabajar antes de 7AM o después de 7PM</em></li>
    <li><em>No trabajar antes de 9AM sábado</em></li>
    <li><strong><em>No trabajar domingo</em></strong></li>
  </ul>
</div>

<!-- SIGNATURES -->
<div class="section">
  <div class="section-title">Stand-Down Attendees / Firmas</div>
  <div class="grid">
    <input placeholder="1. Name / Nombre">
    <input placeholder="2. Name / Nombre">
    <input placeholder="3. Name / Nombre">
    <input placeholder="4. Name / Nombre">
    <input placeholder="5. Name / Nombre">
    <input placeholder="6. Name / Nombre">
    <input placeholder="7. Name / Nombre">
    <input placeholder="8. Name / Nombre">
    <input placeholder="9. Name / Nombre">
    <input placeholder="10. Name / Nombre">
  </div>
</div>

<!-- PHOTO UPLOAD -->
<div class="section">
  <div class="section-title">Photos / Fotos</div>
  <input type="file" id="photoUpload" accept="image/*" multiple>
  <div class="small">Upload from gallery / Subir desde galería</div>
  <div id="photoPreview"></div>
</div>

<button id="savePdfBtn">Save Safety Stand Down (PDF)</button>

</div>

<!-- PHOTO COMPRESSION -->
<script>
document.getElementById('photoUpload').addEventListener('change', function(event){
  const preview = document.getElementById('photoPreview');
  preview.innerHTML = '';

  Array.from(event.target.files).forEach(file=>{
    const reader = new FileReader();
    reader.onload = function(e){
      const img = new Image();
      img.src = e.target.result;

      img.onload = function(){
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');

        const MAX_WIDTH = 1000;
        const scale = MAX_WIDTH / img.width;

        canvas.width = MAX_WIDTH;
        canvas.height = img.height * scale;

        ctx.drawImage(img,0,0,canvas.width,canvas.height);

        const compressed = canvas.toDataURL("image/jpeg",0.6);

        const previewImg = document.createElement('img');
        previewImg.src = compressed;
        previewImg.style.width='100%';
        preview.appendChild(previewImg);
      };
    };
    reader.readAsDataURL(file);
  });
});
</script>

<!-- PDF GENERATION -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
document.getElementById("savePdfBtn").addEventListener("click", async ()=>{
  const { jsPDF } = window.jspdf;

  const btn = document.getElementById("savePdfBtn");
  btn.style.display="none";

  const element = document.getElementById("pdfContent");

  const canvas = await html2canvas(element,{
    scale:0.9,
    useCORS:true
  });

  btn.style.display="block";

  const imgData = canvas.toDataURL("image/jpeg",0.6);

  const pdf = new jsPDF("p","pt","a4");
  const pageWidth = pdf.internal.pageSize.getWidth();
  const imgWidth = pageWidth;
  const imgHeight = (canvas.height * imgWidth) / canvas.width;

  pdf.addImage(imgData,"JPEG",0,0,imgWidth,imgHeight,"","FAST");
  pdf.save("BFS_Safety_Stand_Down.pdf");
});
</script>

</body>
</html>
