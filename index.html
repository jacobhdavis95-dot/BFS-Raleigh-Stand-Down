<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BFS | Safety Stand-Down</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  margin:0;
  background:#f4f6f8;
  color:#1F2A44;
}
header{
  background:#C8102E;
  color:#fff;
  padding:14px;
  text-align:center;
}
.drive{
  background:#1F2A44;
  color:#fff;
  text-align:center;
  padding:6px;
  font-size:13px;
  letter-spacing:1px;
}
.raleigh{
  background:#C8102E;
  color:#fff;
  text-align:center;
  padding:6px;
  font-size:12px;
  font-weight:600;
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
.section{
  background:#fff;
  border:2px solid #C8102E;
  border-radius:10px;
  padding:18px;
  margin-bottom:20px;
}
.section-title{
  font-size:18px;
  font-weight:700;
  margin-bottom:10px;
  color:#C8102E;
}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}
label{
  font-weight:600;
  display:block;
  margin-top:10px;
}
input, select, textarea{
  width:100%;
  padding:10px;
  margin-top:5px;
  border-radius:6px;
  border:1px solid #ccc;
}
ul{ margin-top:8px; }
button{
  width:100%;
  padding:10px;
  background:#C8102E;
  color:#fff;
  font-weight:700;
  border:none;
  border-radius:8px;
  margin-top:10px;
  cursor:pointer;
}

/* Initial pads */
.initial-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:15px;
  margin-top:10px;
}
.initialPad{
  width:100%;
  height:80px;
  border:2px solid #C8102E;
  border-radius:6px;
  background:#fff;
}

/* Signature pads */
canvas.signature{
  width:100%;
  height:200px;
  border:2px solid #C8102E;
  border-radius:8px;
}
</style>
</head>

<body>

<header>
  <h1>Builders FirstSource</h1>
  <div>Safety Stand-Down</div>
</header>

<div class="drive">DRIVE TO ZERO</div>
<div class="raleigh">RALEIGH INSTALL SERVICES</div>

<div class="container">

<!-- PROJECT INFO -->
<div class="section">
  <div class="section-title">Project Information</div>
  <div class="grid">
    <div><label>Date</label><input type="date"></div>
    <div><label>BFS Representative</label><input type="text"></div>
    <div><label>Customer</label><input type="text"></div>
    <div><label>Building</label><input type="text"></div>
    <div><label>Project / Jobsite</label><input type="text"></div>
    <div>
      <label>Project Type</label>
      <select>
        <option>Framing</option>
        <option>Windows / Doors</option>
        <option>Trim</option>
        <option>Deck</option>
        <option>Other</option>
      </select>
    </div>
    <div><label>Lot</label><input type="text"></div>
    <div><label># Workers Onsite</label><input type="number"></div>
    <div><label>Project Subcontractor</label><input type="text"></div>
    <div><label>Onsite Supervisor (Subcontractor)</label><input type="text"></div>
  </div>
</div>

<!-- DETAILED SUMMARY -->
<div class="section">
  <div class="section-title">Detailed Safety Summary</div>
  <label>Safety Topics Discussed</label>
  <textarea rows="4"></textarea>
  <label>Corrective Actions Needed</label>
  <textarea rows="4"></textarea>
</div>

<!-- ATTENDEE INITIALS -->
<div class="section">
  <div class="section-title">Stand-Down Attendee Signed Initials</div>
  <div class="initial-grid">
    <!-- 10 signature pads -->
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
    <canvas class="initialPad"></canvas>
  </div>
</div>

<!-- BFS SIGNATURE -->
<div class="section">
  <div class="section-title">BFS Representative Signature</div>
  <canvas id="bfsSignature" class="signature"></canvas>
  <button onclick="clearCanvas('bfsSignature')">Clear Signature</button>
</div>

<!-- SUBCONTRACTOR SIGNATURE -->
<div class="section">
  <div class="section-title">Subcontractor Representative Signature</div>
  <canvas id="subSignature" class="signature"></canvas>
  <button onclick="clearCanvas('subSignature')">Clear Signature</button>
</div>

<!-- PHOTO SECTION -->
<div class="section">
  <div class="section-title">Jobsite Photos</div>
  <input type="file" id="photoUpload" accept="image/*" multiple>
  <div id="photoPreview"></div>
</div>

</div>

<script>
// Signature Drawing Logic
function enableDrawing(canvas){
  const ctx = canvas.getContext("2d");
  let drawing = false;

  function resize(){
    const ratio = window.devicePixelRatio || 1;
    canvas.width = canvas.offsetWidth * ratio;
    canvas.height = canvas.offsetHeight * ratio;
    ctx.scale(ratio, ratio);
  }
  resize();
  window.addEventListener("resize", resize);

  canvas.addEventListener("mousedown", ()=>drawing=true);
  canvas.addEventListener("mouseup", ()=>drawing=false);
  canvas.addEventListener("mouseleave", ()=>drawing=false);

  canvas.addEventListener("mousemove", e=>{
    if(!drawing) return;
    const rect = canvas.getBoundingClientRect();
    ctx.lineWidth=2;
    ctx.lineCap="round";
    ctx.strokeStyle="#000";
    ctx.lineTo(e.clientX-rect.left,e.clientY-rect.top);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(e.clientX-rect.left,e.clientY-rect.top);
  });

  canvas.addEventListener("touchstart", ()=>drawing=true);
  canvas.addEventListener("touchend", ()=>drawing=false);
  canvas.addEventListener("touchmove", e=>{
    e.preventDefault();
    if(!drawing) return;
    const rect = canvas.getBoundingClientRect();
    const touch = e.touches[0];
    ctx.lineWidth=2;
    ctx.lineCap="round";
    ctx.strokeStyle="#000";
    ctx.lineTo(touch.clientX-rect.left,touch.clientY-rect.top);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(touch.clientX-rect.left,touch.clientY-rect.top);
  });
}

document.querySelectorAll(".initialPad").forEach(enableDrawing);
enableDrawing(document.getElementById("bfsSignature"));
enableDrawing(document.getElementById("subSignature"));

function clearCanvas(id){
  const canvas=document.getElementById(id);
  const ctx=canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

// Photo upload with compression
document.getElementById('photoUpload').addEventListener('change', function(event){
  const preview=document.getElementById('photoPreview');
  preview.innerHTML='';
  Array.from(event.target.files).forEach(file=>{
    const reader=new FileReader();
    reader.onload=function(e){
      const img=new Image();
      img.src=e.target.result;
      img.onload=function(){
        const canvas=document.createElement('canvas');
        const ctx=canvas.getContext('2d');
        const MAX_WIDTH=1000;
        const scale=MAX_WIDTH/img.width;
        canvas.width=MAX_WIDTH;
        canvas.height=img.height*scale;
        ctx.drawImage(img,0,0,canvas.width,canvas.height);
        const compressed=canvas.toDataURL("image/jpeg",0.6);
        const previewImg=document.createElement('img');
        previewImg.src=compressed;
        previewImg.style.width="100%";
        previewImg.style.marginTop="10px";
        preview.appendChild(previewImg);
      };
    };
    reader.readAsDataURL(file);
  });
});
</script>

</body>
</html>

